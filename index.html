<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Jinge&#39;blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Jinge'blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Jinge'blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jinge'blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Jinge&#39;blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jinge&#39;blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">iOS探索之路</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-iOS用AFN上传图片到服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/19/iOS用AFN上传图片到服务器/" class="article-date">
  <time datetime="2016-04-19T02:01:40.000Z" itemprop="datePublished">2016-04-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/19/iOS用AFN上传图片到服务器/">iOS用AFN上传图片到服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.单张图片上传</p>
<pre><code><span class="comment">//上传图片(单张)</span>
+(<span class="keyword">void</span>)uploadPhotoAndController:(<span class="built_in">UIViewController</span> *)controller WithSize:(<span class="built_in">CGSize</span>)size Image:(<span class="built_in">UIImage</span>*)image AndFinish:(<span class="keyword">void</span> (^)(<span class="built_in">NSDictionary</span> *, <span class="built_in">NSError</span> *))finish
{
    <span class="comment">//加载提示菊花</span>
    MBProgressHUD *hud;
    <span class="keyword">if</span>(controller){
        hud = [MBProgressHUD showHUDAddedTo:controller<span class="variable">.view</span> animated:<span class="literal">YES</span>];
        hud<span class="variable">.label</span><span class="variable">.text</span> = <span class="built_in">NSLocalizedString</span>(<span class="string">@"加载中..."</span>, <span class="string">@"HUD loading title"</span>);
    }

    <span class="comment">//1. 存放图片的服务器地址，这里我用的宏定义</span>
    <span class="built_in">NSString</span> * url = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@"</span>,Hx_Main_heard_API,IMAGE_UPLOAD_URL_API];

    <span class="comment">//2. 利用时间戳当做图片名字</span>
       <span class="built_in">NSDateFormatter</span> *formatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];  
    formatter<span class="variable">.dateFormat</span> = <span class="string">@"yyyyMMddHHmmss"</span>;  
    <span class="built_in">NSString</span> *imageName = [formatter stringFromDate:[<span class="built_in">NSDate</span> date]];  
    <span class="built_in">NSString</span> *fileName = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@.jpg"</span>,imageName];

    <span class="comment">//3. 图片二进制文件</span>
    <span class="built_in">NSData</span> *imageData = <span class="built_in">UIImageJPEGRepresentation</span>(image, <span class="number">0.7</span>f);
    <span class="built_in">NSLog</span>(<span class="string">@"upload image size: %ld k"</span>, (<span class="keyword">long</span>)(imageData<span class="variable">.length</span> / <span class="number">1024</span>));

    <span class="comment">//4. 发起网络请求</span>
    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
    manager<span class="variable">.requestSerializer</span> = [AFHTTPRequestSerializer serializer];
    manager<span class="variable">.responseSerializer</span> = [AFJSONResponseSerializer serializer];
    [manager POST:url parameters:<span class="literal">nil</span> constructingBodyWithBlock:^(<span class="keyword">id</span>&lt;AFMultipartFormData&gt; formData) {
        <span class="comment">// 上传图片，以文件流的格式，这里注意：name是指服务器端的文件夹名字</span>
        [formData appendPartWithFileData:imageData name:<span class="string">@"file"</span> fileName:fileName mimeType:<span class="string">@"image/jpeg"</span>];
    } success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject) {
        <span class="comment">//上传成功时的回调</span>
        [hud hideAnimated:<span class="literal">YES</span>];
        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,responseObject);
        finish(responseObject,<span class="literal">nil</span>);
    } failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error) {
        <span class="comment">//失败时的回调</span>
        [hud hideAnimated:<span class="literal">YES</span>];
        finish(<span class="literal">nil</span>,error);
    }];
}
</code></pre><p>2.多张图片上传</p>
<pre><code><span class="comment">// 上传图片（多张）</span>
+(<span class="keyword">void</span>)uploadPhotoAndController:(<span class="built_in">UIViewController</span> *)controller WithSize:(<span class="built_in">CGSize</span>)size Image:(<span class="built_in">UIImage</span>*)image AndFinish:(<span class="keyword">void</span> (^)(<span class="built_in">NSDictionary</span> *, <span class="built_in">NSError</span> *))finish
{
    <span class="comment">//加载提示菊花</span>
    MBProgressHUD *hud;
    <span class="keyword">if</span>(controller){
        hud = [MBProgressHUD showHUDAddedTo:controller<span class="variable">.view</span> animated:<span class="literal">YES</span>];
        hud<span class="variable">.label</span><span class="variable">.text</span> = <span class="built_in">NSLocalizedString</span>(<span class="string">@"加载中..."</span>, <span class="string">@"HUD loading title"</span>);
    }

    <span class="comment">//1. 存放图片的服务器地址，这里我用的宏定义</span>
    <span class="built_in">NSString</span> * url = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@"</span>,Hx_Main_heard_API,IMAGE_UPLOAD_URL_API];

    <span class="comment">//2. 发起网络请求</span>
    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
    manager<span class="variable">.requestSerializer</span> = [AFHTTPRequestSerializer serializer];
    manager<span class="variable">.responseSerializer</span> = [AFJSONResponseSerializer serializer];    
    [manager POST:url parameters:<span class="literal">nil</span> constructingBodyWithBlock:^(<span class="keyword">id</span>&lt;AFMultipartFormData&gt; formData)
    {
        <span class="comment">// 上传多张图片</span>
        <span class="keyword">for</span>(<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; <span class="keyword">self</span><span class="variable">.imageDataArray</span><span class="variable">.count</span>; i++)
        {
            <span class="comment">//取出单张图片二进制数据</span>
            <span class="built_in">NSData</span> * imageData = <span class="keyword">self</span><span class="variable">.imageDataArray</span>[i];

            <span class="comment">// 上传的参数名，在服务器端保存文件的文件夹名</span>
            <span class="built_in">NSString</span> * Name = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%ld"</span>, Image_Name, i+<span class="number">1</span>];
            <span class="comment">// 上传filename</span>
            <span class="built_in">NSString</span> * fileName = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@.jpg"</span>, Name];

            [formData appendPartWithFileData:imageData name:Name fileName:fileName mimeType:<span class="string">@"image/jpeg"</span>];
        }
    }
    success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject)
     {
         <span class="comment">//上传成功时的回调</span>
        [hud hideAnimated:<span class="literal">YES</span>];
        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,responseObject);
        finish(responseObject,<span class="literal">nil</span>);           
     }
     failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error)
     {
         <span class="comment">//失败时的回调</span>
        [hud hideAnimated:<span class="literal">YES</span>];
        finish(<span class="literal">nil</span>,error);
     }];
}
</code></pre><p>PS:上传图片前，必须先压缩图片，不然图片过大，可能会导致上传失败！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/19/iOS用AFN上传图片到服务器/" data-id="cin6scn0x001ang0jnchcpc1t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/图片上传/">图片上传</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-UIImagePickerController获取图片（拍照、相册、图库）详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/15/UIImagePickerController获取图片（拍照、相册、图库）详解/" class="article-date">
  <time datetime="2016-04-15T06:40:01.000Z" itemprop="datePublished">2016-04-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/15/UIImagePickerController获取图片（拍照、相册、图库）详解/">UIImagePickerController获取图片（拍照、相册、图库）详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>iOS 图片来源有三种方法：</p>
<pre><code><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UIImagePickerControllerSourceType</span>) {
    <span class="built_in">UIImagePickerControllerSourceTypePhotoLibrary</span>,    <span class="comment">//1.从图库中选择</span>
    <span class="built_in">UIImagePickerControllerSourceTypeCamera</span>,          <span class="comment">//2.直接调用摄像头拍照</span>
    <span class="built_in">UIImagePickerControllerSourceTypeSavedPhotosAlbum</span> <span class="comment">//3.从相册中选择</span>
} __TVOS_PROHIBITED;
</code></pre><p>UIImagePickerController是系统提供的用来获取图片和视频的接口，用UIImagePickerController类来获取图片视频，大体分为以下几个步骤：</p>
<pre><code><span class="number">1.</span> 实例化UIImagePickerController
<span class="number">2.</span> 设置UIImagePickerController数据来源类型
<span class="number">3.</span> 设置代理，遵循UIImagePickerControllerDelegate,UINavigationControllerDelegate协议
<span class="number">4.</span> 实现代理方法接收选取图片并做处理
</code></pre><p>在代理中获取我们选中的图片，UIImagePickerControllerDelegate代理中一共三个方法，其中一个3.0已经废弃了，只剩下两个我们需要用的。</p>
<pre><code><span class="comment">//1.当用户选取完成后调用；</span>
- (<span class="typename">void</span>)<span class="string">imagePickerController:</span>(UIImagePickerController *)picker <span class="string">didFinishPickingMediaWithInfo:</span>(NSDictionary *)info;

<span class="comment">//2.当用户取消选取时调用；</span>
- (<span class="typename">void</span>)<span class="string">imagePickerControllerDidCancel:</span>(UIImagePickerController *)picker;
</code></pre><p>在这里，我们主要使用第一个代理方法，在选取图片完成后调用，选取的信息都在info中，info 是一个字典。</p>
<pre><code><span class="comment">// 代理方法,获取图片</span>
<span class="comment">// 选取的信息都在info中，info 是一个字典。</span>
/**
<span class="comment">// info dictionary keys</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerMediaType __TVOS_PROHIBITED;<span class="comment">//指定用户选择的媒体类型</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerOriginalImage __TVOS_PROHIBITED;<span class="comment">//原始图片</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerEditedImage __TVOS_PROHIBITED;<span class="comment">//修改后的图片</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerCropRect __TVOS_PROHIBITED;<span class="comment">//裁剪尺寸</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerMediaURL __TVOS_PROHIBITED;<span class="comment">//媒体的URL</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerReferenceURL        NS_AVAILABLE_IOS(<span class="number">4</span>_1) __TVOS_PROHIBITED;<span class="comment">//原件的URL</span>
UIKIT_EXTERN NSString *const UIImagePickerControllerMediaMetadata       NS_AVAILABLE_IOS(<span class="number">4</span>_1) __TVOS_PROHIBITED;<span class="comment">//如果是拍照的照片，则需要手动保存到本地，系统不会自动保存拍照成功后的照片</span>
</code></pre><p>下面是具体的代码，只写了核心的部分，当你需要获取系统图片时，执行- (void)startGetPhoto;此方法即可。</p>
<pre><code><span class="comment">//点击更换头像时开始执行此方法</span>
- (<span class="keyword">void</span>)startGetPhoto
{
    <span class="keyword">self</span><span class="variable">.actionSheet</span> = [[<span class="built_in">UIActionSheet</span> alloc] initWithTitle:<span class="literal">nil</span>
                                                   delegate:<span class="keyword">self</span>
                                          cancelButtonTitle:<span class="string">@"取消"</span>
                                     destructiveButtonTitle:<span class="literal">nil</span>
                                          otherButtonTitles:<span class="string">@"相册"</span>, <span class="string">@"拍照"</span>, <span class="literal">nil</span>];
    <span class="keyword">self</span><span class="variable">.actionSheet</span><span class="variable">.tag</span> = ActionSheetTagAddPhoto;
    [<span class="keyword">self</span><span class="variable">.actionSheet</span> showInView:<span class="keyword">self</span><span class="variable">.view</span>];
}

<span class="preprocessor">#pragma mark -</span>
<span class="preprocessor">#pragma mark UIActionSheetDelegate Call Back Implementation</span>

- (<span class="keyword">void</span>)actionSheet:(<span class="built_in">UIActionSheet</span> *)actionSheet clickedButtonAtIndex:(<span class="built_in">NSInteger</span>)buttonIndex
{
       <span class="keyword">if</span> (<span class="number">0</span> == buttonIndex)
    {
        <span class="comment">//打开本地相册</span>
        [<span class="keyword">self</span> localPhoto];
    }
    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">1</span> == buttonIndex)
    {
        <span class="comment">// 开始拍照</span>
        [<span class="keyword">self</span> takePhoto];
    }

}

<span class="preprocessor">#pragma mark -</span>
<span class="preprocessor">#pragma mark UIImagePickerControllerDelegate Call Back Implementation</span>

- (<span class="keyword">void</span>)imagePickerController:(<span class="built_in">UIImagePickerController</span> *)picker didFinishPickingMediaWithInfo:(<span class="built_in">NSDictionary</span> *)info
{
    <span class="built_in">NSString</span> *type = [info objectForKey:<span class="built_in">UIImagePickerControllerMediaType</span>];

    <span class="comment">//当选择的类型是图片</span>
    <span class="keyword">if</span> ([type isEqualToString:<span class="string">@"public.image"</span>])
    {
        <span class="built_in">NSString</span> *key = <span class="literal">nil</span>;

        <span class="keyword">if</span> (picker<span class="variable">.allowsEditing</span>)
        {
            key = <span class="built_in">UIImagePickerControllerEditedImage</span>;
        }
        <span class="keyword">else</span>
        {
            key = <span class="built_in">UIImagePickerControllerOriginalImage</span>;
        }
        <span class="comment">//获取图片</span>
        <span class="built_in">UIImage</span> *image = [info objectForKey:key];

        <span class="keyword">if</span> (picker<span class="variable">.sourceType</span> == <span class="built_in">UIImagePickerControllerSourceTypeCamera</span>) {
            <span class="comment">// 固定方向</span>
            image = [image fixOrientation];<span class="comment">//这个方法是UIImage+Extras.h中方法</span>
            <span class="comment">//压缩图片质量</span>
            image = [<span class="keyword">self</span> reduceImage:image percent:<span class="number">0.1</span>];
            <span class="built_in">CGSize</span> imageSize = image<span class="variable">.size</span>;
            imageSize<span class="variable">.height</span> = <span class="number">320</span>;
            imageSize<span class="variable">.width</span> = <span class="number">320</span>;
            <span class="comment">//压缩图片尺寸</span>
            image = [<span class="keyword">self</span> imageWithImageSimple:image scaledToSize:imageSize];
        }
        <span class="comment">//上传到服务器</span>
        <span class="comment">//[self doAddPhoto:image];</span>
        <span class="comment">//关闭相册界面</span>
        [picker dismissViewControllerAnimated:<span class="literal">YES</span> completion:^{

        }];
    }
}

<span class="comment">// 开始拍照</span>
-(<span class="keyword">void</span>)takePhoto
{
    <span class="keyword">if</span> ([<span class="built_in">UIImagePickerController</span> isSourceTypeAvailable:<span class="built_in">UIImagePickerControllerSourceTypeCamera</span>])
    {
        <span class="built_in">UIImagePickerController</span> *picker = [[<span class="built_in">UIImagePickerController</span> alloc] init];
        picker<span class="variable">.sourceType</span> = <span class="built_in">UIImagePickerControllerSourceTypeCamera</span>;
        picker<span class="variable">.delegate</span> = <span class="keyword">self</span>;
        <span class="comment">//设置拍照后的图片可被编辑</span>
        picker<span class="variable">.allowsEditing</span> = <span class="literal">YES</span>;
        picker<span class="variable">.sourceType</span> = <span class="built_in">UIImagePickerControllerSourceTypeCamera</span>;
        <span class="comment">//先检查相机可用是否</span>
        <span class="built_in">BOOL</span> cameraIsAvailable = [<span class="keyword">self</span> checkCamera];
        <span class="keyword">if</span> (<span class="literal">YES</span> == cameraIsAvailable) {
            [<span class="keyword">self</span> presentViewController:picker animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];
        }<span class="keyword">else</span> {
            <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="string">@"提示"</span> message:<span class="string">@"请在iPhone的“设置-隐私-相机”选项中，允许本应用程序访问你的相机。"</span> delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@"好，我知道了"</span> otherButtonTitles:<span class="literal">nil</span>];
            [alert show];
        }

    }
}

<span class="comment">// 打开本地相册</span>
-(<span class="keyword">void</span>)localPhoto
{    
    <span class="comment">//本地相册不需要检查，因为UIImagePickerController会自动检查并提醒</span>
    <span class="built_in">UIImagePickerController</span> *picker = [[<span class="built_in">UIImagePickerController</span> alloc] init];
    picker<span class="variable">.sourceType</span> = <span class="built_in">UIImagePickerControllerSourceTypePhotoLibrary</span>;
    picker<span class="variable">.delegate</span> = <span class="keyword">self</span>;
    <span class="comment">//设置选择后的图片可被编辑</span>
    picker<span class="variable">.allowsEditing</span> = <span class="literal">YES</span>;
    [<span class="keyword">self</span> presentViewController:picker animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];
}

    <span class="comment">//检查相机是否可用</span>
- (<span class="built_in">BOOL</span>)checkCamera
{
    <span class="built_in">NSString</span> *mediaType = <span class="built_in">AVMediaTypeVideo</span>;
    <span class="built_in">AVAuthorizationStatus</span> authStatus = [<span class="built_in">AVCaptureDevice</span> authorizationStatusForMediaType:mediaType];
    <span class="keyword">if</span>(<span class="built_in">AVAuthorizationStatusRestricted</span> == authStatus ||
       <span class="built_in">AVAuthorizationStatusDenied</span> == authStatus)
    {
        <span class="comment">//相机不可用</span>
        <span class="keyword">return</span> <span class="literal">NO</span>;
    }
    <span class="comment">//相机可用</span>
    <span class="keyword">return</span> <span class="literal">YES</span>;
}

<span class="comment">//压缩图片质量</span>
-(<span class="built_in">UIImage</span> *)reduceImage:(<span class="built_in">UIImage</span> *)image percent:(<span class="keyword">float</span>)percent
{
    <span class="built_in">NSData</span> *imageData = <span class="built_in">UIImageJPEGRepresentation</span>(image, percent);
    <span class="built_in">UIImage</span> *newImage = [<span class="built_in">UIImage</span> imageWithData:imageData];
    <span class="keyword">return</span> newImage;
}
<span class="comment">//压缩图片尺寸</span>
- (<span class="built_in">UIImage</span>*)imageWithImageSimple:(<span class="built_in">UIImage</span>*)image scaledToSize:(<span class="built_in">CGSize</span>)newSize
{
    <span class="built_in">UIGraphicsBeginImageContext</span>(newSize);
    [image drawInRect:<span class="built_in">CGRectMake</span>(<span class="number">0</span>,<span class="number">0</span>,newSize<span class="variable">.width</span>,newSize<span class="variable">.height</span>)];
    <span class="built_in">UIImage</span>* newImage = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();
    <span class="built_in">UIGraphicsEndImageContext</span>();
    <span class="keyword">return</span> newImage;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/15/UIImagePickerController获取图片（拍照、相册、图库）详解/" data-id="cin6scn22002mng0j0qlr3va3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UIImagePickerController-拍照-相册/">UIImagePickerController 拍照 相册</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-UIImagePickerController显示中文界面" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/15/UIImagePickerController显示中文界面/" class="article-date">
  <time datetime="2016-04-15T01:31:38.000Z" itemprop="datePublished">2016-04-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/15/UIImagePickerController显示中文界面/">UIImagePickerController显示中文界面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>iOS开发中，我们经常遇到获取拍照、相册中图片的功能，就必然少不了UIImagePickerController，但是我们发现当我们使用它的时候，它的页面是英文的，看着很别扭，国人还是比较喜欢看中文界面，下面来看看我们怎么把它变成中文界面的吧！</p>
<p>只需下面两步就可以了：</p>
<ol>
<li>Project–&gt;Info–&gt;Localizations 添加 Chinese</li>
</ol>
<p><img src="http://7xosy6.com1.z0.glb.clouddn.com/ImagePicker%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87_1.png" alt="Mou icon"></p>
<ol>
<li>Target–&gt;Info–&gt;Localization native development region 值修改为 China </li>
</ol>
<p><img src="http://7xosy6.com1.z0.glb.clouddn.com/ImagePicker%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87_2.png" alt="Mou icon"></p>
<p>科普一下：以前xcode3生成的项目，修改Target–&gt;Info–&gt;Localization native development region 的值为China就能显示中文；Xcode4以后修改Target–&gt;Info–&gt;Localization native development region值为China还不够，同时还需要设置Project–&gt;info–&gt;Localizations Language添加Chinese才行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/15/UIImagePickerController显示中文界面/" data-id="cin6scn25002png0jeov0mx2m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UIImagePickerController-中文/">UIImagePickerController 中文</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-动态计算UITableViewCell高度" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/13/动态计算UITableViewCell高度/" class="article-date">
  <time datetime="2016-04-13T07:54:47.000Z" itemprop="datePublished">2016-04-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/13/动态计算UITableViewCell高度/">动态计算UITableViewCell高度</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在iOS开发中，我们少不了和UITableview打交道，因为UITableview也是UIKit中最复杂的一个控件了。在使用UITableview的过程中，UITableviewCell也是必不可少的，页面列表形式的展示可谓是各种各样，相信不少童鞋们也曾为复杂的页面布局困惑过，其中比较难的也就数cell的高度自适应了，也就是说cell的高度是根据内容来动态计算的。</p>
<p>不适用Autolayout的时候，计算cell的高度：</p>
<pre><code><span class="comment">//返回cell的的高度</span>
- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath
{
    PhotoInfo *photoInfo = [<span class="keyword">self</span><span class="variable">.dataArr</span> objectAtIndex:indexPath<span class="variable">.row</span>];
    [<span class="keyword">self</span> heightForRowWithModel:photoInfo];
}

<span class="comment">//动态计算cell的高度 </span>
- (<span class="built_in">CGFloat</span>)heightForRowWithModel:(PhotoInfo *)photoInfo 
{ 
    <span class="comment">//这里只写了label的计算</span>
      <span class="comment">//文本的高度 </span>
    <span class="built_in">CGSize</span> texSize = [<span class="keyword">self</span> labelAutoCalculateRectWith:photoInfo<span class="variable">.instruction</span> FontSize:<span class="number">15</span> MaxSize:<span class="built_in">CGSizeMake</span>(<span class="number">200</span>,<span class="number">1000</span>)];
    <span class="comment">//3.返回cell 的总高度 </span>
    <span class="keyword">return</span> <span class="number">44</span> + textSize<span class="variable">.height</span>;
}  

<span class="comment">/*根据传过来的文字内容、字体大小、宽度和最大尺寸动态计算文字所占用的size
              * text 文本内容 
              * fontSize 字体大小
              * maxSize  size（宽度，1000）
              * return  size （计算的size）
              */</span>
- (<span class="built_in">CGSize</span>)labelAutoCalculateRectWith:(<span class="built_in">NSString</span>*)text FontSize:(<span class="built_in">CGFloat</span>)fontSize MaxSize:(<span class="built_in">CGSize</span>)maxSize
{
    <span class="built_in">NSMutableParagraphStyle</span>* paragraphStyle = [[<span class="built_in">NSMutableParagraphStyle</span> alloc]init];
   paragraphStyle<span class="variable">.lineBreakMode</span>=<span class="built_in">NSLineBreakByWordWrapping</span>;
    <span class="built_in">NSDictionary</span>* attributes =@{<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> systemFontOfSize:fontSize],<span class="built_in">NSParagraphStyleAttributeName</span>:paragraphStyle<span class="variable">.copy</span>};
    <span class="built_in">CGSize</span> labelSize;
      <span class="comment">//如果是IOS6.0</span>
    <span class="keyword">if</span> (![text respondsToSelector:<span class="keyword">@selector</span>(boundingRectWithSize:options:attributes:context:)]){
        labelSize = [text sizeWithFont:[<span class="built_in">UIFont</span> systemFontOfSize:fontSize] constrainedToSize:maxSize lineBreakMode:<span class="built_in">NSLineBreakByWordWrapping</span>];
    }
    <span class="comment">//如果系统为iOS7.0</span>
   　<span class="keyword">else</span>
　　{
　　        <span class="comment">// iOS7中用以下方法替代过时的iOS6中的sizeWithFont:constrainedToSize:lineBreakMode:方法</span>
        labelSize = [text boundingRectWithSize: maxSize
                                       options: <span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span>|<span class="built_in">NSStringDrawingUsesFontLeading</span>|<span class="built_in">NSStringDrawingTruncatesLastVisibleLine</span>
                                    attributes:attributes
                                       context:<span class="literal">nil</span>]<span class="variable">.size</span>;
    }
    labelSize<span class="variable">.height</span>=ceil(labelSize<span class="variable">.height</span>);    
    labelSize<span class="variable">.width</span>=ceil(labelSize<span class="variable">.width</span>);
    <span class="keyword">return</span> labelSize;
}
</code></pre><p>使用Autolayout，- (CGSize)systemLayoutSizeFittingSize:(CGSize)targetSize这个方法就能搞定。不过，首先要在Xib上布局cell。</p>
<p><img src="http://7xosy6.com1.z0.glb.clouddn.com/cell%E9%AB%98%E5%BA%A6%E5%8A%A8%E6%80%81%E8%AE%A1%E7%AE%97.png" alt="Mou icon"></p>
<pre><code><span class="comment">//返回cell高度</span>
- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath {
    SystemMSGTableViewCell *cell = <span class="keyword">self</span><span class="variable">.cell</span>;
    SystemmsgInfo *data = <span class="keyword">self</span><span class="variable">.dataArr</span>[indexPath<span class="variable">.row</span>];
    <span class="built_in">CGFloat</span> height = [cell heightForCell:data];
    <span class="keyword">return</span> height;
} 

<span class="comment">//动态计算cell的高度</span>
- (<span class="built_in">CGFloat</span>)heightForCell:(SystemmsgInfo *)data
{
    <span class="keyword">self</span><span class="variable">.widthLabel</span><span class="variable">.constant</span> = ScreenWidth - <span class="number">40</span>;
    <span class="keyword">self</span><span class="variable">.contentLabel</span><span class="variable">.text</span> = data<span class="variable">.promotionInfo</span>;
    <span class="built_in">CGSize</span> size = [<span class="keyword">self</span><span class="variable">.contentView</span> systemLayoutSizeFittingSize:<span class="built_in">UILayoutFittingCompressedSize</span>];
    <span class="built_in">NSLog</span>(<span class="string">@"h=%f"</span>, size<span class="variable">.height</span> + <span class="number">1</span>);
    <span class="keyword">return</span> <span class="number">1</span>  + size<span class="variable">.height</span>;
}
</code></pre><p>效果图：</p>
<p><img src="http://7xosy6.com1.z0.glb.clouddn.com/cell%E9%AB%98%E5%BA%A6%E5%8A%A8%E6%80%81%E8%AE%A1%E7%AE%97_2.png" alt="Mou icon"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/13/动态计算UITableViewCell高度/" data-id="cin6scn09000png0j88g323ob" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cell-动态计算高度/">cell 动态计算高度</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-svn-出现folder-is-already-under-version-control问题的解决办法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/11/svn-出现folder-is-already-under-version-control问题的解决办法/" class="article-date">
  <time datetime="2016-04-11T03:05:59.000Z" itemprop="datePublished">2016-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/11/svn-出现folder-is-already-under-version-control问题的解决办法/">[svn]出现folder_is_already_under_version_control问题的解决办法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天在提交项目时添加一个文件夹（folderName），结果svn出现了：Folder（文件夹）is already under version control这样的警告信息，并且怎么也提交不上。刚遇到此问题的时候感觉很奇怪，自己并没有在svn上添加这个目录（folderName），这里却提醒此目录（folderName）已经有version。而且svn上该目录状态也是？状态。经过查阅资料后才明白，原因是：我所添加的这个文件夹是从另一个项目中拷贝过来的，而且这个项目也是在svn上保存的，这样就导致我所提交的文件或目录是其他svn的东西，也就是说下面有.svn的目录，要解决此问题，删除要提交目录下的所有.svn文件即可，记住是该目录下所有.svn文件，注意递归子目录。</p>
<p>这里给出三种解决方式：其中前两种方法是递归删除该目录以及子目录下下所有.svn文件；第三种是本人用的比较笨的方法：也就是新建一个文件夹，然后将我们所需要的文件夹下的文件选中拷贝一份（记住不要拷贝目标文件夹，只拷贝里面需要的文件即可），最后将拷贝的文件放到新建的文件夹下，然后导入工程，避免有旧的.svn文件存在。</p>
<p>方法一：</p>
<p>打开终端，cd到你新增加的那个目录，然后用下面的命令</p>
<pre><code><span class="built_in">find</span> . -mindepth <span class="number">2</span> -<span class="built_in">name</span> <span class="string">'.svn'</span> -<span class="built_in">exec</span> rm -rf <span class="string">'{}'</span> \;
说明: -<span class="built_in">exec</span>之后的rm -rf是命令以及参数，{}就是<span class="built_in">find</span>的命令找到的结果集，\; 也是需要输入的哦
</code></pre><p>方法二：</p>
<p>同样是在终端里，cd到你新增加的那个目录，然后用下面的命令</p>
<pre><code><span class="built_in">find</span> . -<span class="built_in">type</span> d -<span class="built_in">name</span> “.svn”|xargs rm -rf
</code></pre><p>方法三：</p>
<p>见上描述，本人觉得此方法是比较笨的方法，若有童鞋对命令行比较熟悉，可以采用以上高大上的方式，若像我一样对命令行了解不多，可以采用此方法，毕竟比较实用，哈哈！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/11/svn-出现folder-is-already-under-version-control问题的解决办法/" data-id="cin6scn0o0011ng0j3qn60jnr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/svn/">svn</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-将字符串切割成数组-将数组元素拼接成字符串" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/08/将字符串切割成数组-将数组元素拼接成字符串/" class="article-date">
  <time datetime="2016-04-08T13:05:01.000Z" itemprop="datePublished">2016-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/08/将字符串切割成数组-将数组元素拼接成字符串/">将字符串切割成数组&amp;将数组元素拼接成字符串</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#componentsJoinedByString 和 componentsSeparatedByString 的方法的区别</p>
<ol>
<li><p>将string字符串转换为array数组</p>
<pre><code>NSArray  *<span class="built_in">array</span> = [Str componentsSeparatedByString:@<span class="string">","</span>];
</code></pre></li>
<li><p>将array数组转换为string字符串</p>
<pre><code>NSString *tempString = [mutableArray componentsJoinedByString:@<span class="string">","</span>];<span class="comment">--分隔符</span>
</code></pre></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/08/将字符串切割成数组-将数组元素拼接成字符串/" data-id="cin6scn03000lng0jts3d39l1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-tableview刷新某个区域（section）或者某一行（row）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/08/tableview刷新某个区域（section）或者某一行（row）/" class="article-date">
  <time datetime="2016-04-08T13:00:03.000Z" itemprop="datePublished">2016-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/08/tableview刷新某个区域（section）或者某一行（row）/">tableview刷新某个区域（section）或者某一行（row）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code><span class="comment">//一个section刷新    </span>

NSIndexSet *indexSet=[[NSIndexSet alloc]<span class="string">initWithIndex:</span><span class="number">2</span>];    

[tableview <span class="string">reloadSections:</span>indexSet <span class="string">withRowAnimation:</span>UITableViewRowAnimationAutomatic];    



<span class="comment">//一个cell刷新    </span>

NSIndexPath *indexPath=[NSIndexPath <span class="string">indexPathForRow:</span><span class="number">3</span> <span class="string">inSection:</span><span class="number">0</span>];    

[tableView <span class="string">reloadRowsAtIndexPaths:</span>[NSArray <span class="string">arrayWithObjects:</span>indexPath,nil] <span class="string">withRowAnimation:</span>UITableViewRowAnimationNone];  
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/08/tableview刷新某个区域（section）或者某一行（row）/" data-id="cin6scn0k000yng0jdkceue80" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tableView-刷新cell/">tableView 刷新cell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-正则表达式在iOS中的应用总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/25/正则表达式在iOS中的应用总结/" class="article-date">
  <time datetime="2016-03-25T08:21:39.000Z" itemprop="datePublished">2016-03-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/25/正则表达式在iOS中的应用总结/">正则表达式在iOS中的应用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一、什么是正则表达式</p>
<p>　　正则表达式，又称正规表示法，是对字符串操作的一种逻辑公式。正则表达式可以检测给定的字符串是否符合我们定义的逻辑，也可以从字符串中获取我们想要的特定部分。它可以迅速地用极简单的方式达到字符串的复杂控制。</p>
<p>二、正则表达式的语法</p>
<p>先看一个过滤纯数字的例子</p>
<pre><code>- (<span class="built_in">BOOL</span>)validateNumber:(<span class="built_in">NSString</span> *) textString
{ <span class="built_in">NSString</span>* number=<span class="string">@"^[0-9]+$"</span>;
<span class="built_in">NSPredicate</span> *numberPre = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF MATCHES %@"</span>,number];
<span class="keyword">return</span> [numberPre evaluateWithObject:textString];
}
</code></pre><p>其中下述语句就是一个正则表达式</p>
<pre><code>@<span class="string">"^[0-9]+$"</span>
它代表了字符串中只能包含&gt;=<span class="number">1</span>个<span class="number">0</span>-<span class="number">9</span>的数字，语法是不是有一些怪异？
下面我们先撇开iOS中的正则表达式的语法，用通俗的正则表达式语法来为介绍一下。（iOS语法与通俗的正则表达式语法相同，不同在于对转义字符的处理上(语言类的都相同)）
</code></pre><p>正则表达式语法：</p>
<pre><code><span class="comment">首先，特殊符号'^'和'$'。他们的作用是分别指出一个字符串的开始和结束。eg：</span>
<span class="comment">“^one”：表示所有以”one”开始的字符串（”one</span> <span class="comment">cat”，”one123″，·····）；</span>
<span class="comment">类似于:</span><span class="literal">-</span> <span class="comment">(BOOL)hasPrefix:(NSString</span> <span class="comment">*)aString;</span>
<span class="comment">“a</span> <span class="comment">dog$”：表示所以以”a</span> <span class="comment">dog”结尾的字符串（”it</span> <span class="comment">is</span> <span class="comment">a</span> <span class="comment">dog”，·····）；</span>
<span class="comment">类似于:</span><span class="literal">-</span> <span class="comment">(BOOL)hasSuffix:(NSString</span> <span class="comment">*)aString;</span>
<span class="comment">“^apple$”：表示开始和结尾都是”apple”的字符串，这个是唯一的~；</span>
<span class="comment">“banana”：表示任何包含”banana”的字符串。</span>
<span class="comment">类似于</span> <span class="comment">iOS8的新方法</span><span class="literal">-</span> <span class="comment">(BOOL)containsString:(NSString</span> <span class="comment">*)aString</span><span class="string">,</span><span class="comment">搜索子串用的。</span>
<span class="comment">‘*'，'</span><span class="literal">+</span><span class="comment">'和'?'这三个符号，表示一个或N个字符重复出现的次数。它们分别表示“没有或更多”（</span><span class="title">[</span><span class="comment">0</span><span class="string">,</span><span class="literal">+</span><span class="comment">∞</span><span class="title">]</span><span class="comment">取整），“一次或更多”（</span><span class="title">[</span><span class="comment">1</span><span class="string">,</span><span class="literal">+</span><span class="comment">∞</span><span class="title">]</span><span class="comment">取整），“没有或一次”（</span><span class="title">[</span><span class="comment">0</span><span class="string">,</span><span class="comment">1</span><span class="title">]</span><span class="comment">取整）。下面是几个例子：</span>
<span class="comment">“ab*”：表示一个字符串有一个a后面跟着零个或若干个b（”a”</span><span class="string">,</span> <span class="comment">“ab”</span><span class="string">,</span> <span class="comment">“abbb”</span><span class="string">,</span><span class="comment">……）；</span>
<span class="comment">“ab</span><span class="literal">+</span><span class="comment">”：表示一个字符串有一个a后面跟着至少一个b或者更多（</span> <span class="comment">”ab”</span><span class="string">,</span> <span class="comment">“abbb”</span><span class="string">,</span><span class="comment">……）；</span>
<span class="comment">“ab?”：表示一个字符串有一个a后面跟着零个或者一个b（</span> <span class="comment">”a”</span><span class="string">,</span> <span class="comment">“ab”）；</span>
<span class="comment">“a?b</span><span class="literal">+</span><span class="comment">$”：表示在字符串的末尾有零个或一个a跟着一个或几个b（</span> <span class="comment">”b”</span><span class="string">,</span> <span class="comment">“ab”</span><span class="string">,</span><span class="comment">”bb”</span><span class="string">,</span><span class="comment">”abb”</span><span class="string">,</span><span class="comment">……）。</span>
<span class="comment">可以用大括号括起来（{}），表示一个重复的具体范围。例如</span>
<span class="comment">“ab{4}”：表示一个字符串有一个a跟着4个b（”abbbb”）；</span>
<span class="comment">“ab{1</span><span class="string">,</span><span class="comment">}”：表示一个字符串有一个a跟着至少1个b（”ab”</span><span class="string">,</span><span class="comment">”abb”</span><span class="string">,</span><span class="comment">”abbb”</span><span class="string">,</span><span class="comment">……)；</span>
<span class="comment">“ab{3</span><span class="string">,</span><span class="comment">4}”：表示一个字符串有一个a跟着3到4个b（”abbb”</span><span class="string">,</span><span class="comment">”abbbb”)。</span>
<span class="comment">那么，“*”可以用{0，}表示，“</span><span class="literal">+</span><span class="comment">”可以用{1，}表示，“?”可以用{0，1}表示</span>
<span class="comment">注意：可以没有下限，但是不能没有上限！例如“ab{</span><span class="string">,</span><span class="comment">5}”是错误的写法</span>
<span class="comment">“</span> <span class="comment">|</span> <span class="comment">”表示“或”操作：</span>
<span class="comment">“a|b”：表示一个字符串里有”a”或者”b”；</span>
<span class="comment">“(a|bcd)ef”：表示”aef”或”bcdef”；</span>
<span class="comment">“(a|b)*c”：表示一串”a”"b”混合的字符串后面跟一个”c”；</span>
<span class="comment">方括号”</span><span class="title">[</span> <span class="title">]</span><span class="comment">“表示在括号内的众多字符中，选择1</span><span class="literal">-</span><span class="comment">N个括号内的符合语法的字符作为结果，例如</span>
<span class="comment">“</span><span class="title">[</span><span class="comment">ab</span><span class="title">]</span><span class="comment">“：表示一个字符串有一个”a”或”b”（相当于”a|b”）；</span>
<span class="comment">“</span><span class="title">[</span><span class="comment">a</span><span class="literal">-</span><span class="comment">d</span><span class="title">]</span><span class="comment">“：表示一个字符串包含小写的'a'到'd'中的一个（相当于”a|b|c|d”或者”</span><span class="title">[</span><span class="comment">abcd</span><span class="title">]</span><span class="comment">“）；</span>
<span class="comment">“^</span><span class="title">[</span><span class="comment">a</span><span class="literal">-</span><span class="comment">zA</span><span class="literal">-</span><span class="comment">Z</span><span class="title">]</span><span class="comment">“：表示一个以字母开头的字符串；</span>
<span class="comment">“</span><span class="title">[</span><span class="comment">0</span><span class="literal">-</span><span class="comment">9</span><span class="title">]</span><span class="comment">a”：表示a前有一位的数字；</span>
<span class="comment">“</span><span class="title">[</span><span class="comment">a</span><span class="literal">-</span><span class="comment">zA</span><span class="literal">-</span><span class="comment">Z0</span><span class="literal">-</span><span class="comment">9</span><span class="title">]</span><span class="comment">$”：表示一个字符串以一个字母或数字结束。</span>
<span class="comment">“</span><span class="string">.</span><span class="comment">”匹配除“\r\n”之外的任何单个字符：</span>
<span class="comment">“a</span><span class="string">.</span><span class="title">[</span><span class="comment">a</span><span class="literal">-</span><span class="comment">z</span><span class="title">]</span><span class="comment">“：表示一个字符串有一个”a”后面跟着一个任意字符和一个小写字母；</span>
<span class="comment">“^</span><span class="string">.</span><span class="comment">{5}$”：表示任意1个长度为5的字符串；</span>
<span class="comment">“\num”</span> <span class="comment">其中num是一个正整数。表示”\num”之前的字符出现相同的个数，例如</span>
<span class="comment">“(</span><span class="string">.</span><span class="comment">)\1″：表示两个连续的相同字符。</span>
<span class="comment">“10\{1</span><span class="string">,</span><span class="comment">2\}”</span> <span class="comment">:</span> <span class="comment">表示数字1后面跟着1或者2个0</span> <span class="comment">(“10″</span><span class="string">,</span><span class="comment">”100″)。</span>
<span class="comment">”</span> <span class="comment">0\{3</span><span class="string">,</span><span class="comment">\}</span> <span class="comment">”</span> <span class="comment">表示数字为至少3个连续的0</span> <span class="comment">（“000”，“0000”，······）。</span>
<span class="comment">在方括号里用'^'表示不希望出现的字符，'^'应在方括号里的第一位。</span>
<span class="comment">“@</span><span class="title">[</span><span class="comment">^a</span><span class="literal">-</span><span class="comment">zA</span><span class="literal">-</span><span class="comment">Z</span><span class="title">]</span><span class="comment">4@”表示两个”@”中不应该出现字母）。</span>
<span class="comment">常用的还有：</span>
<span class="comment">“</span> <span class="comment">\d</span> <span class="comment">”匹配一个数字字符。等价于</span><span class="title">[</span><span class="comment">0</span><span class="literal">-</span><span class="comment">9</span><span class="title">]</span><span class="comment">。</span>
<span class="comment">“</span> <span class="comment">\D”匹配一个非数字字符。等价于</span><span class="title">[</span><span class="comment">^0</span><span class="literal">-</span><span class="comment">9</span><span class="title">]</span><span class="comment">。</span>
<span class="comment">“</span> <span class="comment">\w</span> <span class="comment">”匹配包括下划线的任何单词字符。等价于“</span><span class="title">[</span><span class="comment">A</span><span class="literal">-</span><span class="comment">Za</span><span class="literal">-</span><span class="comment">z0</span><span class="literal">-</span><span class="comment">9_</span><span class="title">]</span><span class="comment">”。</span>
<span class="comment">“</span> <span class="comment">\W</span> <span class="comment">”匹配任何非单词字符。等价于“</span><span class="title">[</span><span class="comment">^A</span><span class="literal">-</span><span class="comment">Za</span><span class="literal">-</span><span class="comment">z0</span><span class="literal">-</span><span class="comment">9_</span><span class="title">]</span><span class="comment">”。</span>
<span class="comment">iOS中书写正则表达式，碰到转义字符，多加一个“\”</span><span class="string">,</span><span class="comment">例如：</span>
<span class="comment">全数字字符：@”^\\d\</span><span class="literal">+</span><span class="comment">$”</span>
</code></pre><p>　　<br>三、iOS中正则表达式的3种使用</p>
<p>1.正则表达式与NSPredicate连用，eg：</p>
<pre><code>- (<span class="built_in">BOOL</span>)validateNumber:(<span class="built_in">NSString</span> *) textString
{
<span class="built_in">NSString</span>* number=<span class="string">@"^[0-9]+$"</span>;
<span class="built_in">NSPredicate</span> *numberPre = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF MATCHES %@"</span>,number];
<span class="keyword">return</span> [numberPre evaluateWithObject:textString];
}
</code></pre><p>2.NSString方法</p>
<pre><code>- (<span class="built_in">NSRange</span>)rangeOfString:(<span class="built_in">NSString</span> *)aString options:
(<span class="built_in">NSStringCompareOptions</span>)mask;
<span class="built_in">NSString</span> *searchText = <span class="string">@"rangeOfString"</span>;
<span class="built_in">NSRange</span> range = [searchText rangeOfString:<span class="string">@"^[0-9]+$"</span> 
options:<span class="built_in">NSRegularExpressionSearch</span>];
<span class="keyword">if</span> (range<span class="variable">.location</span> != <span class="built_in">NSNotFound</span>) {
<span class="built_in">NSLog</span>(<span class="string">@"range ：%@"</span>, [searchText substringWithRange:range]);
}
</code></pre><p>3.正则表达式类（NSRegularExpression）</p>
<pre><code><span class="type">NSString</span> *searchText = @<span class="string">"you want to match"</span>; 
<span class="type">NSError</span> *error = <span class="type">NULL</span>;
<span class="type">NSRegularExpression</span> *regex = [<span class="type">NSRegularExpression</span> regularExpressionWithPattern:@<span class="string">"^[0-9]+$"</span> options:<span class="type">NSRegularExpressionCaseInsensitive</span> error:&amp;error];
<span class="type">NSTextCheckingResult</span> *<span class="literal">result</span> = [regex firstMatchInString:searchText options:<span class="number">0</span> <span class="type">range</span>:<span class="type">NSMakeRange</span>(<span class="number">0</span>, [searchText length])];
<span class="keyword">if</span> (<span class="literal">result</span>) {
 <span class="type">NSLog</span>(@<span class="string">"%@"</span>, [searchText substringWithRange:<span class="literal">result</span>.<span class="type">range</span>]);
}
</code></pre><p>四、常用的正则表达式</p>
<pre><code>1.验证用户名和密码：”^[a-zA-Z]\w{5,15}$”
2.验证电话号码：（”^(\\d{3,4}-)\\d{7,8}$”）
eg：021-68686868  0511-6868686；
3.验证手机号码：”^1[<span class="link_label">3|4|5|7|8</span>][<span class="link_reference">0-9</span>]\\d{8}$”；
4.验证身份证号（15位或18位数字）：”\\d{14}[[0-9],0-9xX]”；
5.验证Email地址：(“^\\w+([-+.]\\w+)<span class="emphasis">*@\\w+([-.]\\w+)*</span>\.\\w+([-.]\\w+)*$”)；
6.只能输入由数字和26个英文字母组成的字符串：(“^[A-Za-z0-9]+$”) ;
7.整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$
8.只能输入数字：”^[0-9]*$”。
9.只能输入n位的数字：”^\\d{n}$”。
10.只能输入至少n位的数字：”^\\d{n,}$”。
11.只能输入m~n位的数字：”^\\d{m,n}$”。
12.只能输入零和非零开头的数字：”^(0|[<span class="link_label">1-9</span>][<span class="link_reference">0-9</span>]*)$”。
13.只能输入有两位小数的正实数：”^[0-9]+(.[0-9]{2})?$”。
14.只能输入有1~3位小数的正实数：”^[0-9]+(\.[0-9]{1,3})?$”。
15.只能输入非零的正整数：”^\+?[<span class="link_label">1-9</span>][<span class="link_reference">0-9</span>]*$”。
16.只能输入非零的负整数：”^\-[<span class="link_label">1-9</span>][<span class="link_reference"></span>]0-9″*$。
17.只能输入长度为3的字符：”^.{3}$”。
18.只能输入由26个英文字母组成的字符串：”^[A-Za-z]+$”。
19.只能输入由26个大写英文字母组成的字符串：”^[A-Z]+$”。
20.只能输入由26个小写英文字母组成的字符串：”^[a-z]+$”。
21.验证是否含有^%&amp;',;=?$\”等字符：”[^%&amp;',;=?$\x22]+”。
22.只能输入汉字：”^[\u4e00-\u9fa5]{0,}$”。
23.验证URL：”^http://([\\w-]+\.)+[\\w-]+(/[\\w-./?%&amp;=]*)?$”。
24.验证一年的12个月：”^(0?[1-9]|1[0-2])$”正确格式为：”01″～”09″和”10″～”12″。
25.验证一个月的31天：”^((0?[1-9])|((1|2)[0-9])|30|31)$”正确格式为；”01″～”09″、”10″～”29″和“30”~“31”。
26.获取日期正则表达式：\\d{4}[年|\-|\.]\\d{\1-\12}[月|\-|\.]\\d{\1-\31}日?
评注：可用来匹配大多数年月日信息。
27.匹配双字节字符(包括汉字在内)：[^\x00-\xff]
评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1）
28.匹配空白行的正则表达式：\n\s*\r
评注：可以用来删除空白行
29.匹配HTML标记的正则表达式：<span class="xml"><span class="tag">&lt;<span class="title">(\S*?)[^</span>&gt;</span></span>]<span class="emphasis">*&gt;.*</span>?<span class="xml"><span class="tag">&lt;/&gt;</span></span>|<span class="xml"><span class="tag">&lt;<span class="title">.*?</span> /&gt;</span></span>
评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力
30.匹配首尾空白字符的正则表达式：^\s<span class="emphasis">*|\s*</span>$
评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式
31.匹配网址URL的正则表达式：[a-zA-z]+://[^\s]*
评注：网上流传的版本功能很有限，上面这个基本可以满足需求
32.匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[<span class="link_label">a-zA-Z</span>][<span class="link_reference">a-zA-Z0-9_</span>]{4,15}$
评注：表单验证时很实用
33.匹配腾讯QQ号：[<span class="link_label">1-9</span>][<span class="link_reference">0-9</span>]\{4,\}
评注：腾讯QQ号从10 000 开始
34.匹配中国邮政编码：[1-9]\\d{5}(?!\d)
评注：中国邮政编码为6位数字
35.匹配ip地址：((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)。
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/25/正则表达式在iOS中的应用总结/" data-id="cin6scmzp0006ng0jyl3qvk03" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS-正则表达式/">iOS 正则表达式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS开发中webView与JS交互的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/22/iOS开发中webView与JS交互的使用/" class="article-date">
  <time datetime="2016-03-22T08:24:26.000Z" itemprop="datePublished">2016-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/22/iOS开发中webView与JS交互的使用/">iOS开发中webView与JS交互的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>UIWebView是iOS sdk中一个最常用的控件。是内置的浏览器控件，我们可以用它来浏览网页、打开文档等等，UIWebView能够加载html/htm、pdf、docx、txt等格式的文件。系统自带的Safari浏览器就是通过UIWebView实现的。下面我的一起来开开如何简单使用webView。</p>
<p>下面直接上代码：</p>
<p>搭建页面</p>
<pre><code>- (<span class="keyword">void</span>)viewDidLoad
{
    [<span class="keyword">super</span> viewDidLoad];
    <span class="keyword">self</span><span class="variable">.url</span> = <span class="string">@"https://www.baidu.com/"</span>;
    <span class="built_in">NSURLRequest</span> *urlRequest = [<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="keyword">self</span><span class="variable">.url</span>]];
       [<span class="keyword">self</span><span class="variable">.webView</span> loadRequest:urlRequest];
}
</code></pre><p>返回按钮点击事件</p>
<pre><code><span class="tag">-</span> (void)<span class="tag">goBack</span>
{
    <span class="tag">if</span> ([self.webView canGoBack])
    {
        <span class="attr_selector">[self.webView goBack]</span>;<span class="comment">//当有H5二级页面在本控制器上加载出现时，调这个</span>
    }<span class="tag">else</span> {
        <span class="comment">//当前控制器pop/dismiss返回上一级控制器</span>
    }
}
</code></pre><p>webview的三个代理方法：</p>
<pre><code><span class="comment">//利用URL来调用我们iOSnative的操作</span>
-(<span class="built_in">BOOL</span>)webView:(<span class="built_in">UIWebView</span> *)webView shouldStartLoadWithRequest:(<span class="built_in">NSURLRequest</span> *)request navigationType:(<span class="built_in">UIWebViewNavigationType</span>)navigationType
{
    <span class="built_in">NSString</span> *url = request<span class="variable">.URL</span><span class="variable">.absoluteString</span>;
    <span class="comment">//拦截URL跳转</span>
    <span class="keyword">if</span> ([url hasPrefix:<span class="string">@"事先规定好的协议URL"</span>])
    {        
        <span class="comment">//在这里进行跳转</span>
        <span class="keyword">return</span> <span class="literal">NO</span>;
    }
    <span class="built_in">NSString</span> *pattern = <span class="literal">nil</span>;
    <span class="built_in">NSRange</span> r;
    <span class="comment">//拦截URL跳转</span>
    pattern = <span class="string">@"事先规定好的协议URL"</span>;
    r = [url rangeOfString:pattern options:<span class="built_in">NSRegularExpressionSearch</span>];
    <span class="keyword">if</span> (r<span class="variable">.location</span> != <span class="built_in">NSNotFound</span>) {  
        <span class="comment">//在这里进行跳转      </span>
        <span class="keyword">return</span> <span class="literal">NO</span>;
    }
    <span class="comment">//调用父类的方法</span>
    <span class="keyword">return</span>  [<span class="keyword">super</span> webView:webView shouldStartLoadWithRequest:request navigationType:navigationType];

}

-(<span class="keyword">void</span>)webViewDidStartLoad:(<span class="built_in">UIWebView</span> *)webView
{
    <span class="comment">//开始加载</span>
}

<span class="comment">//iOS调用JS的方法</span>
- (<span class="keyword">void</span>)webViewDidFinishLoad:(<span class="built_in">UIWebView</span> *)webView
{
    <span class="comment">//加载结束</span>
    [<span class="keyword">super</span> webViewDidFinishLoad:webView];
    <span class="comment">//    NSString *docStr=[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.textContent"];//获取web页面内容信息，此处获取的是个json字符串</span>

    <span class="comment">//    NSString *docStr=[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"alert(1);"]];//显示并获取一个弹窗</span>

    <span class="comment">//    NSString *docStr=[webView stringByEvaluatingJavaScriptFromString:@"document.location.href"];//获取当前页面的url</span>

    <span class="comment">//    NSString *docStr=[webView stringByEvaluatingJavaScriptFromString:@"document.title"];//获取当前页面的title</span>

    <span class="comment">//    NSString *docStr=[webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByName('q')[0].value='http://www.cnblogs.com/Twisted-Fate/p/Mr.林';"];//修改当前页面的元素的值</span>

    <span class="comment">//    NSString *docStr=[webView stringByEvaluatingJavaScriptFromString:@"document.forms[0].submit();"];//表单提交</span>

    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;
    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^{
    [webView stringByEvaluatingJavaScriptFromString:<span class="string">@"var script = document.createElement('script');"</span>
     <span class="string">"script.type = 'text/javascript';"</span>
     <span class="string">"script.text = \"function myFunction() { "</span>
     <span class="string">"var field = document.getElementsByName('q')[0];"</span>
     <span class="string">"field.value='http://www.cnblogs.com/Twisted-Fate/p/Mr.林';"</span>
     <span class="string">"document.forms[0].submit();"</span>
     <span class="string">"}\";"</span>
     <span class="string">"document.getElementsByTagName('head')[0].appendChild(script);"</span>];
    });
    <span class="built_in">NSString</span> *docStr=[webView stringByEvaluatingJavaScriptFromString:<span class="string">@"myFunction();"</span>];

    <span class="built_in">NSLog</span>(<span class="string">@"------&gt;%@"</span>,docStr);
}
</code></pre><p>WebView自带的属性是不可以改变网页中字体大小颜色这些需求的，笔者给出几种解决方案如下:</p>
<ol>
<li><p>第一种方式：在WebView的代理方法webViewDidFinishLoad中：</p>
<pre><code>字体大小： <span class="matrix">[webView stringByEvaluatingJavaScriptFromString:@<span class="string">"document.getElementsByTagName('</span>body<span class="string">')[0].style.webkitTextSizeAdjust= '</span><span class="number">12</span>%<span class="string">'"</span>]</span>;

字体颜色：<span class="matrix">[webView stringByEvaluatingJavaScriptFromString:@<span class="string">"document.getElementsByTagName('</span>body<span class="string">')[0].style.webkitTextFillColor= '</span>green<span class="string">'"</span>]</span>;

背景颜色：<span class="matrix">[webView stringByEvaluatingJavaScriptFromString:@<span class="string">"document.getElementsByTagName('</span>body<span class="string">')[0].style.background='</span>#F6F7F3<span class="string">'"</span>]</span>;
</code></pre></li>
<li><p>第二种方式：在下面可以通过改变margin大小来改变webview文字距离边距大小，13代表字体大小，self.strBookTips是要被操作的字符串。</p>
<pre><code>NSString *BookStr = [NSString stringWithFormat:@"<span class="tag">&lt;<span class="title">html</span>&gt;</span> \n"
                      "<span class="tag">&lt;<span class="title">head</span>&gt;</span> \n"
                      "<span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">\"text</span>/<span class="attribute">css</span>\"&gt;</span><span class="css"> \<span class="tag">n</span>"
                      "<span class="tag">body</span> <span class="rules">{<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">10</span></span></span>;<span class="rule"><span class="attribute">font-size</span>:<span class="value"> %d</span></span>;}</span>\<span class="tag">n</span>"
                      "</span><span class="tag">&lt;/<span class="title">style</span>&gt;</span> \n"
                      "<span class="tag">&lt;/<span class="title">head</span>&gt;</span> \n"
                      "<span class="tag">&lt;<span class="title">body</span>&gt;</span>%@<span class="tag">&lt;/<span class="title">body</span>&gt;</span> \n"
                      "<span class="tag">&lt;/<span class="title">html</span>&gt;</span>",13,self.strBookTips];
[self.webView loadHTMLString:BookStr baseURL:nil];
</code></pre></li>
<li><p>第三种方式，这种缺少了改变背景颜色</p>
<pre><code><span class="built_in">NSString</span> * formatString = <span class="string">@"&lt;span style=\"font-size:13px;color:#7E7C8A\"&gt;%@&lt;/span&gt;"</span>;
<span class="built_in">NSString</span> * htmlString = [<span class="built_in">NSString</span> stringWithFormat:formatString,<span class="keyword">self</span><span class="variable">.strBookTips</span>];
[<span class="keyword">self</span><span class="variable">.webView</span> loadHTMLString:BookStr baseURL:<span class="literal">nil</span>];
</code></pre></li>
</ol>
<p><a href="http://www.cnblogs.com/gcb999/p/3178728.html" target="_blank" rel="external">http://www.cnblogs.com/gcb999/p/3178728.html</a></p>
<p><a href="http://www.kwstu.com/ArticleView/guandebao_20139618222689" target="_blank" rel="external">http://www.kwstu.com/ArticleView/guandebao_20139618222689</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/22/iOS开发中webView与JS交互的使用/" data-id="cin6scn19001png0jzdopnn4u" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS-webView-JS/">iOS webView JS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-UIViewController中各方法调用顺序详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/22/UIViewController中各方法调用顺序详解/" class="article-date">
  <time datetime="2016-03-22T07:47:12.000Z" itemprop="datePublished">2016-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/22/UIViewController中各方法调用顺序详解/">UIViewController中各方法调用顺序详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>UIViewController中loadView, viewDidLoad, viewWillUnload, viewDidUnload, viewWillAppear, viewDidAppear, viewWillLayoutSubviews，viewDidLayoutSubviews，viewWillDisappear, viewDidDisappear方法，按照调用顺序说明如下</p>
<ol>
<li>initWithNibName:bundle:</li>
</ol>
<p>初始化UIViewController，执行关键数据初始化操作，注意这里不要做view相关操作，view在loadView方法中才初始化，这时loadView还未调用。如果使用StoryBoard进行视图管理，程序不会直接初始化一个UIViewController，StoryBoard会自动初始化或在segue被触发时自动初始化，因此方法initWithNibName:bundle:不会被调用。如果在代码里面使用instantiateViewControllerWithIdentifier:方法显示初始化一个UIViewController，则initWithCoder方法会被调用。</p>
<p>如果是通过调用initWithNibName:bundle指定nib文件名初始化的话，ViewController会根据此nib来创建View。如果name参数为nil，则ViewController会通过以下两个步骤找到与其关联的nib：<br>1）如果ViewController的类名以“Controller”结尾，例如ViewController的类名是MyViewController，则查找是否存在MyView.nib；<br>2）找跟ViewController类名一样的文件，例如MyViewController，则查找是否存在MyViewController.nib</p>
<ol>
<li>loadView</li>
</ol>
<p>当访问UIViewController的view属性时，view如果此时是nil，那么VC会自动调用loadView方法来初始化一个UIView并赋值给view属性。此方法用在初始化关键view，需要注意的是，在view初始化之前，不能先调用view的getter方法，否则将导致死循环（除非先调用了[supper<br> loadView];）。</p>
<p>-(void)loadView{<br>    NSLog(@”loadView”);<br>    //错误，将导致死循环，因此此时view=nil，VC会再次调用loadView来初始化view<br>    self.view.backgroundColor = [UIColor greenColor];<br>}</p>
<p>-(void)loadView{<br>    NSLog(@”loadView”);<br>    //正确，先初始化view<br>    self.view = [[MyView alloc] init];<br>    self.view.backgroundColor = [UIColor greenColor];<br>}</p>
<p>如果没有重载loadView方法，则UIViewController会从nib或StoryBoard中查找默认的loadView，默认的loadView会返回一个空白的UIView对象。</p>
<ol>
<li>viewDidLoad</li>
</ol>
<p>当VC的view对象载入内存后调用，用于对view进行额外的初始化操作</p>
<ol>
<li>viewWillAppear</li>
</ol>
<p>在view即将添加到视图层级中(显示给用户)且任意显示动画切换之前调用(这个时候supperView还是nil)。这个方法中完成任何与视图显示相关的任务，例如改变视图方向、状态栏方向、视图显示样式等</p>
<ol>
<li>viewDidAppear</li>
</ol>
<p>在view被添加到视图层级中，显示动画切换之后调用(这时view已经添加到supperView中)。在这个方法中执行视图显示相关附件任务，如果重载了这个方法，必须在方法中调用[supper<br> viewDidAppear];</p>
<ol>
<li>viewWillLayoutSubviews</li>
</ol>
<p>view即将布局其Subviews。比如view的bounds改变了(例如状态栏从不显示到显示，视图方向变化)，要调整Subviews的位置，在调整之前要做的一些工作就可以在该方法中实现。</p>
<ol>
<li>viewDidLayoutSubviews</li>
</ol>
<p>view已经布局其Subviews。比如view的bounds改变了(例如状态栏从不显示到显示，视图方向变化)，已经调整Subviews的位置，在调整完成之后要做的一些工作就可以在该方法中实现。</p>
<ol>
<li>viewWillDisappear</li>
</ol>
<p>view即将从superView中移除且移除动画切换之前，此时还没有调用removeFromSuperview。</p>
<ol>
<li>viewDidDisappear</li>
</ol>
<p>view从superView中移除，移除动画切换之后调用，此时已调用removeFromSuperview。</p>
<ol>
<li>viewWillUnload</li>
</ol>
<p>在VC的view对象从内存中释放之前调用，可以在view被释放前做一些资源清理操作。在iOS6.0开始就废弃了，该方法不再会调用</p>
<ol>
<li>viewDidUnload</li>
</ol>
<p>在VC的view对象从内存中释放之后调用，可以在view被释放后做一些view相关的引用清理操作，此时view为nil。在iOS6.0开始就废弃了，该方法不再会调用</p>
<p>当一个视图被移除屏幕并且销毁的时候的执行顺序，这个顺序差不多和上面的相反<br>1、viewWillDisappear            视图将被从屏幕上移除之前执行<br>2、viewDidDisappear             视图已经被从屏幕上移除，用户看不到这个视图了<br>3、dealloc                      视图被销毁，此处需要对你在init和viewDidLoad中创建的对象进行释放 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/22/UIViewController中各方法调用顺序详解/" data-id="cin6scn1r002dng0jt0x40mur" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UIViewController-生命周期/">UIViewController 生命周期</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CA动画-页面切换/">CA动画 页面切换</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSONKit-iOS9-arm7/">JSONKit iOS9 arm7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UICollectionview-header-footerView/">UICollectionview header/footerView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIImagePickerController-中文/">UIImagePickerController 中文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIImagePickerController-拍照-相册/">UIImagePickerController 拍照 相册</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UITextField-UITextView-过滤-Emoji表情/">UITextField UITextView 过滤 Emoji表情</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIViewController-生命周期/">UIViewController 生命周期</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xcode7-真机调试/">Xcode7 真机调试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cell-动态计算高度/">cell 动态计算高度</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cookie-iOS-NSHTTPCookie-NSHTTPCookieStorage/">cookie iOS NSHTTPCookie NSHTTPCookieStorage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-block/">iOS block</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-nil-NULL-Nil-NSNull/">iOS nil NULL Nil NSNull</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-view-个别圆角/">iOS view 个别圆角</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-webView-JS/">iOS webView JS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-二维码-AVFoundation/">iOS 二维码 AVFoundation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-企业包-ipa/">iOS 企业包 ipa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-宏定义/">iOS 宏定义</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS-正则表达式/">iOS 正则表达式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS6-横屏-旋转/">iOS6 横屏 旋转</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS8-横屏-状态栏/">iOS8 横屏 状态栏</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS真机调试/">iOS真机调试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/label-动态计算宽高/">label 动态计算宽高</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn-合作开发-冲突/">svn 合作开发 冲突</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tableView/">tableView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tableView-刷新cell/">tableView 刷新cell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textField-textView-限制字数/">textField textView 限制字数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textView-自动换行/">textView 自动换行</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webView-URL-特殊字符/">webView URL 特殊字符</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/">zsh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单例-GCD/">单例 GCD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图片上传/">图片上传</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CA动画-页面切换/" style="font-size: 10px;">CA动画 页面切换</a> <a href="/tags/JSONKit-iOS9-arm7/" style="font-size: 10px;">JSONKit iOS9 arm7</a> <a href="/tags/UICollectionview-header-footerView/" style="font-size: 10px;">UICollectionview header/footerView</a> <a href="/tags/UIImagePickerController-中文/" style="font-size: 10px;">UIImagePickerController 中文</a> <a href="/tags/UIImagePickerController-拍照-相册/" style="font-size: 10px;">UIImagePickerController 拍照 相册</a> <a href="/tags/UITextField-UITextView-过滤-Emoji表情/" style="font-size: 10px;">UITextField UITextView 过滤 Emoji表情</a> <a href="/tags/UIViewController-生命周期/" style="font-size: 10px;">UIViewController 生命周期</a> <a href="/tags/Xcode7-真机调试/" style="font-size: 10px;">Xcode7 真机调试</a> <a href="/tags/cell-动态计算高度/" style="font-size: 10px;">cell 动态计算高度</a> <a href="/tags/cocoapods/" style="font-size: 10px;">cocoapods</a> <a href="/tags/cookie-iOS-NSHTTPCookie-NSHTTPCookieStorage/" style="font-size: 10px;">cookie iOS NSHTTPCookie NSHTTPCookieStorage</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/iOS-block/" style="font-size: 10px;">iOS block</a> <a href="/tags/iOS-nil-NULL-Nil-NSNull/" style="font-size: 10px;">iOS nil NULL Nil NSNull</a> <a href="/tags/iOS-view-个别圆角/" style="font-size: 10px;">iOS view 个别圆角</a> <a href="/tags/iOS-webView-JS/" style="font-size: 10px;">iOS webView JS</a> <a href="/tags/iOS-二维码-AVFoundation/" style="font-size: 10px;">iOS 二维码 AVFoundation</a> <a href="/tags/iOS-企业包-ipa/" style="font-size: 10px;">iOS 企业包 ipa</a> <a href="/tags/iOS-宏定义/" style="font-size: 10px;">iOS 宏定义</a> <a href="/tags/iOS-正则表达式/" style="font-size: 10px;">iOS 正则表达式</a> <a href="/tags/iOS6-横屏-旋转/" style="font-size: 10px;">iOS6 横屏 旋转</a> <a href="/tags/iOS8-横屏-状态栏/" style="font-size: 10px;">iOS8 横屏 状态栏</a> <a href="/tags/iOS真机调试/" style="font-size: 10px;">iOS真机调试</a> <a href="/tags/label-动态计算宽高/" style="font-size: 10px;">label 动态计算宽高</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/svn-合作开发-冲突/" style="font-size: 10px;">svn 合作开发 冲突</a> <a href="/tags/tableView/" style="font-size: 10px;">tableView</a> <a href="/tags/tableView-刷新cell/" style="font-size: 10px;">tableView 刷新cell</a> <a href="/tags/textField-textView-限制字数/" style="font-size: 10px;">textField textView 限制字数</a> <a href="/tags/textView-自动换行/" style="font-size: 10px;">textView 自动换行</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/webView-URL-特殊字符/" style="font-size: 10px;">webView URL 特殊字符</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/单例-GCD/" style="font-size: 10px;">单例 GCD</a> <a href="/tags/图片上传/" style="font-size: 10px;">图片上传</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/19/iOS用AFN上传图片到服务器/">iOS用AFN上传图片到服务器</a>
          </li>
        
          <li>
            <a href="/2016/04/15/UIImagePickerController获取图片（拍照、相册、图库）详解/">UIImagePickerController获取图片（拍照、相册、图库）详解</a>
          </li>
        
          <li>
            <a href="/2016/04/15/UIImagePickerController显示中文界面/">UIImagePickerController显示中文界面</a>
          </li>
        
          <li>
            <a href="/2016/04/13/动态计算UITableViewCell高度/">动态计算UITableViewCell高度</a>
          </li>
        
          <li>
            <a href="/2016/04/11/svn-出现folder-is-already-under-version-control问题的解决办法/">[svn]出现folder_is_already_under_version_control问题的解决办法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Jingege<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>